<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Causeway Design & Drawing Application</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo-section">
                    <i class="fas fa-bridge logo-icon"></i>
                    <h1>Causeway Design Pro</h1>
                </div>
                <nav class="nav-menu">
                    <button class="nav-btn active" data-tab="dashboard">Dashboard</button>
                    <button class="nav-btn" data-tab="design">Design</button>
                    <button class="nav-btn" data-tab="templates">Templates</button>
                    <button class="nav-btn" data-tab="library">Library</button>
                    <button class="nav-btn" data-tab="optimize">Optimize</button>
                    <button class="nav-btn" data-tab="cost">Cost</button>
                    <button class="nav-btn" data-tab="health">Health</button>
                </nav>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Tab -->
            <div class="tab-content active" id="dashboard-tab">
                <div id="dashboardContainer"></div>
            </div>

            <!-- Design Tab -->
            <div class="tab-content" id="design-tab">
                <div class="design-container">
                    <div class="design-form">
                        <h2><i class="fas fa-calculator"></i> Causeway Design Parameters</h2>
                        
                        <!-- Excel Upload Section -->
                        <div class="upload-section">
                            <h3><i class="fas fa-file-excel"></i> Import from Excel</h3>
                            <div class="file-upload">
                                <input type="file" id="excelFile" accept=".xls,.xlsx" />
                                <label for="excelFile" class="upload-btn">
                                    <i class="fas fa-upload"></i>
                                    Choose Excel File
                                </label>
                            </div>
                            <button id="uploadBtn" class="btn btn-primary">
                                <i class="fas fa-upload"></i> Upload & Parse
                            </button>
                            <div id="uploadStatus" class="upload-status"></div>
                        </div>

                        <!-- Manual Input Section -->
                        <div class="input-section">
                            <h3><i class="fas fa-edit"></i> Manual Input</h3>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="length">Length (m)</label>
                                    <input type="number" id="length" placeholder="100" step="0.1" min="1">
                                </div>
                                <div class="form-group">
                                    <label for="width">Width (m)</label>
                                    <input type="number" id="width" placeholder="8" step="0.1" min="1">
                                </div>
                                <div class="form-group">
                                    <label for="height">Height (m)</label>
                                    <input type="number" id="height" placeholder="2" step="0.1" min="0.5">
                                </div>
                                <div class="form-group">
                                    <label for="waterDepth">Water Depth (m)</label>
                                    <input type="number" id="waterDepth" placeholder="1.5" step="0.1" min="0">
                                </div>
                                <div class="form-group">
                                    <label for="soilType">Soil Type</label>
                                    <select id="soilType">
                                        <option value="soft">Soft Soil</option>
                                        <option value="medium" selected>Medium Soil</option>
                                        <option value="hard">Hard Soil</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="loadType">Load Type</label>
                                    <select id="loadType">
                                        <option value="pedestrian">Pedestrian</option>
                                        <option value="light" selected>Light Vehicle</option>
                                        <option value="heavy">Heavy Vehicle</option>
                                        <option value="railway">Railway</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="safetyFactor">Safety Factor</label>
                                    <input type="number" id="safetyFactor" placeholder="2.5" step="0.1" min="1.5" value="2.5">
                                </div>
                            </div>
                            <button id="calculateBtn" class="btn btn-success">
                                <i class="fas fa-calculator"></i> Calculate Design
                            </button>
                        </div>
                    </div>

                    <div class="design-results">
                        <h2><i class="fas fa-chart-bar"></i> Design Results</h2>
                        <div id="resultsContainer" class="results-container">
                            <div class="placeholder-message">
                                <i class="fas fa-arrow-left"></i>
                                <p>Enter parameters and click Calculate to see results</p>
                            </div>
                        </div>
                        <div id="pdfGenerationSection" class="pdf-section" style="display: none;">
                            <div class="report-buttons">
                                <button id="generatePdfBtn" class="btn btn-primary">
                                    <i class="fas fa-file-pdf"></i> Generate Comprehensive PDF Report
                                </button>
                                <button id="generateExcelBtn" class="btn btn-success">
                                    <i class="fas fa-file-excel"></i> Generate Excel Workbook
                                </button>
                            </div>
                            <p class="pdf-info">
                                <i class="fas fa-info-circle"></i>
                                Creates detailed design documentation with 10% enhanced content, following your Excel structure
                            </p>
                            <p class="excel-info">
                                <i class="fas fa-calculator"></i>
                                Generates Excel workbook with formulas for hydraulic, structural, and material calculations
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Templates Tab -->
            <div class="tab-content" id="templates-tab">
                <div class="optimize-container">
                    <h2><i class="fas fa-layer-group"></i> Design Templates</h2>
                    <p style="color: rgba(255,255,255,0.7); margin-bottom: 30px;">
                        Quick-start your design with pre-configured templates for common scenarios
                    </p>
                    <div id="templatesContainer" class="templates-container"></div>
                </div>
            </div>

            <!-- Library Tab -->
            <div class="tab-content" id="library-tab">
                <div class="optimize-container">
                    <h2><i class="fas fa-folder-open"></i> Design Library</h2>
                    <div class="library-controls">
                        <button id="exportLibraryBtn" class="btn btn-primary">
                            <i class="fas fa-download"></i> Export Library
                        </button>
                        <label for="importLibraryFile" class="btn btn-secondary">
                            <i class="fas fa-upload"></i> Import Library
                        </label>
                        <input type="file" id="importLibraryFile" accept=".json" style="display: none;">
                    </div>
                    <div id="libraryContainer" class="library-container"></div>
                </div>
            </div>

            <!-- Drawing Tab -->
            <div class="tab-content" id="drawing-tab">
                <div class="drawing-container">
                    <div class="drawing-toolbar">
                        <h3><i class="fas fa-pencil-ruler"></i> Drawing Tools</h3>
                        <div class="tool-buttons">
                            <button class="tool-btn active" data-tool="select">
                                <i class="fas fa-mouse-pointer"></i> Select
                            </button>
                            <button class="tool-btn" data-tool="line">
                                <i class="fas fa-minus"></i> Line
                            </button>
                            <button class="tool-btn" data-tool="rectangle">
                                <i class="fas fa-square"></i> Rectangle
                            </button>
                            <button class="tool-btn" data-tool="circle">
                                <i class="fas fa-circle"></i> Circle
                            </button>
                            <button class="tool-btn" data-tool="text">
                                <i class="fas fa-font"></i> Text
                            </button>
                        </div>
                        <div class="drawing-actions">
                            <button id="clearCanvas" class="btn btn-warning">
                                <i class="fas fa-trash"></i> Clear
                            </button>
                            <button id="saveDrawing" class="btn btn-primary">
                                <i class="fas fa-download"></i> Save
                            </button>
                        </div>
                    </div>
                    <div class="canvas-container">
                        <canvas id="drawingCanvas" width="800" height="600"></canvas>
                    </div>
                </div>
            </div>

            <!-- 3D View Tab -->
            <div class="tab-content" id="3d-tab">
                <div class="3d-container">
                    <div class="3d-controls">
                        <h3><i class="fas fa-cube"></i> 3D Controls</h3>
                        <div class="control-group">
                            <label>Rotation X:</label>
                            <input type="range" id="rotX" min="0" max="360" value="0">
                        </div>
                        <div class="control-group">
                            <label>Rotation Y:</label>
                            <input type="range" id="rotY" min="0" max="360" value="0">
                        </div>
                        <div class="control-group">
                            <label>Zoom:</label>
                            <input type="range" id="zoom" min="0.5" max="3" step="0.1" value="1">
                        </div>
                        <button id="reset3D" class="btn btn-secondary">
                            <i class="fas fa-undo"></i> Reset View
                        </button>
                    </div>
                    <div id="3dScene" class="3d-scene"></div>
                </div>
            </div>

            <!-- Analysis Tab -->
            <div class="tab-content" id="analysis-tab">
                <div class="analysis-container">
                    <div class="analysis-charts">
                        <h3><i class="fas fa-chart-line"></i> Structural Analysis</h3>
                        <div class="chart-grid">
                            <div class="chart-container">
                                <h4>Load Distribution</h4>
                                <canvas id="loadChart" width="300" height="200"></canvas>
                            </div>
                            <div class="chart-container">
                                <h4>Material Quantities</h4>
                                <canvas id="materialChart" width="300" height="200"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="analysis-table">
                        <h3><i class="fas fa-table"></i> Detailed Calculations</h3>
                        <div id="analysisTable" class="table-container">
                            <!-- Analysis data will be populated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Optimize Tab -->
            <div class="tab-content" id="optimize-tab">
                <div class="optimize-container">
                    <h2><i class="fas fa-magic"></i> Design Optimization</h2>
                    <div class="optimize-section">
                        <button id="analyzeOptimizationBtn" class="btn btn-primary">
                            <i class="fas fa-search"></i> Analyze Current Design
                        </button>
                        <div id="optimizationResults" class="optimization-results">
                            <div class="placeholder-message">
                                <i class="fas fa-lightbulb"></i>
                                <p>Click "Analyze Current Design" to get optimization suggestions</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="comparison-section">
                        <h3><i class="fas fa-balance-scale"></i> Design Comparison</h3>
                        <div class="comparison-controls">
                            <button id="saveCurrentDesignBtn" class="btn btn-success">
                                <i class="fas fa-save"></i> Save Current Design
                            </button>
                            <button id="loadSavedDesignBtn" class="btn btn-secondary">
                                <i class="fas fa-folder-open"></i> Load Saved Design
                            </button>
                            <button id="compareDesignsBtn" class="btn btn-primary">
                                <i class="fas fa-exchange-alt"></i> Compare Designs
                            </button>
                        </div>
                        <div id="comparisonResults" class="comparison-results"></div>
                    </div>
                    
                    <div class="environmental-section">
                        <h3><i class="fas fa-leaf"></i> Environmental Impact</h3>
                        <button id="assessEnvironmentBtn" class="btn btn-success">
                            <i class="fas fa-tree"></i> Assess Environmental Impact
                        </button>
                        <div id="environmentalResults" class="environmental-results"></div>
                    </div>
                </div>
            </div>

            <!-- Cost Tab -->
            <div class="tab-content" id="cost-tab">
                <div class="cost-container">
                    <h2><i class="fas fa-calculator"></i> Cost Estimation</h2>
                    <div class="cost-controls">
                        <div class="form-group">
                            <label for="regionSelect">Region/Location</label>
                            <select id="regionSelect">
                                <option value="standard">Standard Rates</option>
                                <option value="urban">Urban Area (+20%)</option>
                                <option value="rural">Rural Area (-15%)</option>
                            </select>
                        </div>
                        <button id="calculateCostBtn" class="btn btn-primary">
                            <i class="fas fa-rupee-sign"></i> Calculate Cost
                        </button>
                    </div>
                    <div id="costResults" class="cost-results">
                        <div class="placeholder-message">
                            <i class="fas fa-money-bill-wave"></i>
                            <p>Calculate design first, then estimate costs</p>
                        </div>
                    </div>
                    
                    <div class="cost-breakdown-chart">
                        <h3><i class="fas fa-chart-pie"></i> Cost Breakdown</h3>
                        <canvas id="costChart" width="400" height="300"></canvas>
                    </div>
                </div>
            </div>

            <!-- Health Score Tab -->
            <div class="tab-content" id="health-tab">
                <div class="optimize-container">
                    <h2><i class="fas fa-heartbeat"></i> Design Health Score</h2>
                    <p style="color: rgba(255,255,255,0.7); margin-bottom: 30px;">
                        Comprehensive quality assessment of your design across safety, economy, environmental, and structural factors
                    </p>
                    <div id="healthScoreContainer">
                        <div class="placeholder-message">
                            <i class="fas fa-heartbeat"></i>
                            <p>Calculate a design first to see the health score</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="app-footer">
            <p>&copy; 2024 Causeway Design Pro - Advanced Civil Engineering Solutions</p>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
    <script src="app-enhanced.js"></script>
    <script src="app-gift.js"></script>
</body>
</html>
